app-id: org.v1993.NXDumpClient
runtime: org.gnome.Platform
runtime-version: '45'
sdk: org.gnome.Sdk
command: nxdumpclient
finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  # Switch USB access
  - --device=all
  # Required for hotplug
  - --share=network
  # Default dump destination
  - --filesystem=xdg-download

modules:
  - shared-modules/libusb/libusb.json
  - modules/libgusb.json
  - modules/libportal.json
  - modules/blueprint-compiler.json

  - name: nxdumpclient
    buildsystem: meson
    builddir: true
    config-opts:
      - -Dudev_rules=prompt
      - -Duse_libportal=enabled
      - -Denforce_build_order=true
    sources:
      - type: dir
        path: ..
        skip:
          - flatpak/
          - .git/
